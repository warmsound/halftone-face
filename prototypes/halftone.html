<html>
	<head>
		<style>
			body {
				background-color: #555555;
			}
			#watch-face {
				background-color: #555555;
			}
		</style>
		<script src="matrix.js"></script>
		<script src="hand.js"></script>
		<script src="sampler.js"></script>
	</head>
	<body>
		<canvas id="watch-face" width="240" height="240"></canvas>
	</body>
	<script type="text/javascript">
		const SPOT_RADIUS = 6, R = SPOT_RADIUS;
		const GAMMA = 0.33;

		const canvas = document.getElementById('watch-face');
		const ctx = canvas.getContext('2d');

		const sampler = new Sampler(R);

		const hrsHand = new Hand(/* length */ 85, /* width */ 30, canvas.width, canvas.height,
			['#ff00ff', '#aa00ff', '#5500ff'], sampler);
		const minsHand = new Hand(/* length */ (canvas.height / 2) - R, /* width */ 15, canvas.width, canvas.height,
			['#ff00ff', '#aa00ff', '#5500ff'], sampler);
		const secsHand = new Hand(/* length */ (canvas.height / 2) - R, /* width */ 5, canvas.width, canvas.height,
			['#ff00ff', '#aa00ff', '#5500ff'], sampler);

		function draw() {

			// Background.
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			ctx.beginPath();
			ctx.arc(120, 120, 120, 0, 2 * Math.PI);
			ctx.fillStyle = '#000055';
			ctx.fill();

			// Hands.
			let now = new Date();

			let hrs = now.getHours() % 12;
			hrsHand.setAngle(hrs * (360 / 12));
			hrsHand.draw(ctx);

			let mins = now.getMinutes();
			minsHand.setAngle(mins * (360 / 60));
			minsHand.draw(ctx);

			let secs = now.getSeconds() + (now.getMilliseconds() / 1000);
			secsHand.setAngle(secs * (360 / 60));
			secsHand.draw(ctx);

			//requestAnimationFrame(draw);
		}

		//requestAnimationFrame(draw);
		draw(); setInterval(draw, 1000);
	</script>
</html>
